<?php
$task = $this->task ?? null;
$isEdit = $task !== null;
?>

<h2><?php echo $isEdit ? 'Edit task' : 'New task'; ?></h2>

<form method="POST" action="<?php echo $isEdit ? '/task/update-content' : '/task/add'; ?>">

    <?php if ($isEdit): ?>
        <input type="hidden" name="task_id" value="<?php echo $task['id']; ?>">
    <?php endif; ?>

    <!-- Title -->
    <div class="form-group">
        <label for="title">Title *</label>
        <input
            type="text"
            id="title"
            name="title"
            required
            placeholder="Task title"
            value="<?php echo $isEdit ? htmlspecialchars($task['title']) : ''; ?>">
    </div>

    <!-- Description -->
    <div class="form-group">
        <label for="description">Description</label>
        <textarea
            id="description"
            name="description"
            placeholder="Optional description"
        ><?php echo $isEdit ? htmlspecialchars($task['description']) : ''; ?></textarea>
    </div>

    <!-- Creation date -->
    <div class="form-group">
        <label for="created_at">Creation date *</label>
        <input
            type="date"
            id="created_at"
            name="created_at"
            required
            value="<?php echo $isEdit ? $task['created_at'] : ''; ?>"
            <?php echo $isEdit ? 'readonly' : ''; ?>
        >
    </div>

    <!-- Due date -->
    <div class="form-group">
        <label for="due_date">End date</label>
        <input
            type="date"
            id="due_date"
            name="due_date"
            value="<?php echo $isEdit ? $task['due_date'] : ''; ?>">
    </div>

    <!-- Actions -->
    <div class="form-actions">
        <button type="submit">
            <?php echo $isEdit ? 'Update task' : 'Save task'; ?>
        </button>

        <a href="/task">
            Go back
        </a>
    </div>

</form>
